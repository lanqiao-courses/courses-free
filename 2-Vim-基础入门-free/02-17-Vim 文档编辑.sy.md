---
show: step
version: 0.1
enable_checker: true
---

# Vim 文档编辑

## 实验介绍

#### 实验内容

上次实验带大家快速入门了 Vim,本次实验将介绍更多文档编辑命令

#### 实验知识点

- Vim 重复命令
- 跳转命令
- 复制粘贴

## 实验步骤

接下来我们开始实际操作。

### vim 重复命令

#### 重复执行上次命令

在普通模式下 `.`(小数点)表示重复上一次的命令操作。

拷贝测试文件到本地目录：

```bash
cd /home/shiyanlou
cp /etc/protocols .
```

打开文件进行编辑

```bash
vim protocols
```

普通模式下输入 `x`，删除第一个字符，输入 `.`(小数点)会再次删除一个字符，除此之外也可以重复 `dd` 的删除操作。

#### 执行指定次数相同的命令

进入普通模式输入 `N<command>`，N 表示重复后面的次数，下面来练习：

打开文件文件进行编辑

```bash
vim protocols
```

下面你可以依次进行如下操作练习：

- 输入 `10x`，删除 10 个连续字符
- 输入 `3dd`，将会删除 3 行文本

在普通模式下，你还可以使用 `dw` 或者 `daw`(delete a word)删除一个单词，所以你可以很容易的联想到 `dnw`(**n 替换为相应数字**) 表示删除 n 个单词。

```checker
- name: check file
  script: |
    #!/bin/bash
    ls /home/shiyanlou/protocols
  error: 没有拷贝 protocols 文件到 /home/shiyanlou 目录下
```

### 游标的快速跳转

普通模式下，下列命令可以让光标快速调转到指定位置，我们分别讨论快速实现**行间**跳转和**行内**跳转。

#### 行间跳转

| 命令                    | 说明                                                                                      |
| ----------------------- | ----------------------------------------------------------------------------------------- |
| `nG`(n Shift+g) / `ngg` | 游标移动到第 n 行 **(如果默认没有显示行号，请先进入命令模式，输入 `:set nu` 以显示行号)** |
| `gg`                    | 游标移动到到第一行                                                                        |
| `G`(Shift+g)            | 到最后一行                                                                                |

还是来练习一下吧，使用 vim 打开练习文档：

```bash
vim protocols
```

依次进行如下操作练习：

- 快速跳转到第 9 行，然后将其该行删除
- 回到第一行，向下删除 8 行
- 跳转到文档末，然后删除该行

**小技巧：你在完成依次跳转后，可以使用 `Ctrl+o` 快速回到上一次(跳转前)光标所在位置**,这个技巧很实用，比如当你在写代码时，忽然想起有个 bug，需要修改，这时候你跳过去改好了，只需要按下 `Ctrl+o` 就可以回到你之前的位置。vim 中会用很多类似的小技巧就等着你去发掘。

#### 行内跳转

普通模式下使用下列命令在行内按照单词为单位进行跳转：

| 命令      | 说明                                                       |
| --------- | ---------------------------------------------------------- |
| `w`       | 到下一个单词的开头                                         |
| `e`       | 到当前单词的结尾                                           |
| `b`       | 到前一个单词的开头                                         |
| `ge`      | 到前一个单词的结尾                                         |
| `0`或`^`  | 到行头                                                     |
| `$`       | 到行尾                                                     |
| `f<字母>` | 向后搜索<字母>并跳转到第一个匹配的位置(非常实用)           |
| `F<字母>` | 向前搜索<字母>并跳转到第一个匹配的位置                     |
| `t<字母>` | 向后搜索<字母>并跳转到第一个匹配位置之前的一个字母(不常用) |
| `T<字母>` | 向前搜索<字母>并跳转到第一个匹配位置之后的一个字母(不常用) |

依次进行如下操作练习：

- 在普通模式下，任意跳转到一行，使用 `w` 跳转到一个单词的开头，然后使用 `dw` 删除这个单词
- 在普通模式下，使用 `e` 跳转到一个单词的结尾，并使用 `~` 将游标所在字母变成大写或小写

![1](https://doc.shiyanlou.com/document-uid49570labid17timestamp1491030698462.png/wm)

### 复制粘贴和剪切

#### 复制及粘贴文本

- 普通模式中使用 `y` 复制
- 普通模式中，`yy` 复制游标所在的整行（`3yy` 表示复制 3 行）
- 普通模式中，`y^` 复制至行首，或 `y0`。不含光标所在处字符。
- 普通模式中，`y$` 复制至行尾。含光标所在处字符。
- 普通模式中，`yw` 复制一个单词。
- 普通模式中，`y2w` 复制两个单词。
- 普通模式中，`yG` 复制至文本末。
- 普通模式中，`y1G` 复制至文本开头。

- 普通模式中使用 `p` 粘贴
- 普通模式中，`p`(小写)代表粘贴至光标后（下）
- 普通模式中，`P`(大写)代表粘贴至光标前（上）

打开文件进入普通模式练习上述命令，这会儿你就可以随意 `yy` 了。

```bash
vim protocols
```

#### 剪切及粘贴

其实前面讲得 `dd` 删除命令就是剪切，你每次 `dd` 删除文档内容后，便可以使用 `p` 来粘贴，也这一点可以让我们实现一个很爽快的功能——交换上下行。

`ddp`，就这么简单，即实现了快速交换光标所在行与它下面的行。

![1](https://doc.shiyanlou.com/document-uid49570labid17timestamp1491030759468.png/wm)

## 实验总结

这一小节你应该掌握了几个经常使用到的操作，包括快速行间移动和快速行内移动，以及剪切和复制粘贴等操作，希望你能够多加练习熟练掌握，一旦当你熟练了这些操作将会极大地提高你的工作效率。

## 思考练习

我们前面学过的那些命令、操作，除了提到过的还有哪些支持前面加上数字实现重复多次操作，如 `3dd`。
